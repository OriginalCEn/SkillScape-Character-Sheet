
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SkillScape Character Sheet (Final)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; max-width: 1000px; }
    h1, h2 { border-bottom: 1px solid #000; padding-bottom: 4px; }
    .section { margin-bottom: 25px; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #999; padding: 6px; text-align: center; }
    input[type="text"] { width: 140px; }
    button { padding: 3px 6px; }
    textarea { width: 100%; height: 100px; margin-top: 10px; }
  </style>
</head>
<body>

<h1>SkillScape Character Sheet</h1>

<div class="section">
  <label>Character Name:</label><input type="text" />
  <label style="margin-left: 20px;">Player Name:</label><input type="text" />
</div>

<div class="section">
  <h2>Stats</h2>
  <p>Unspent Stat Points: <span id="availableStats">20</span></p>
  <table id="statsTable">
    <thead>
      <tr><th>Stat</th><th>‚àí</th><th>Value</th><th>+</th></tr>
    </thead>
    <tbody id="stats"></tbody>
  </table>
</div>

<div class="section">
  <h2>Skills</h2>
  <p>Extra Skill Points to Assign: <span id="availableSkillPoints">5</span></p>
  <table>
    <thead>
      <tr><th>Skill Name</th><th>Lvl</th><th>+1</th><th>‚àí1</th><th>XP</th><th>+1 XP</th><th>Level Up</th></tr>
    </thead>
    <tbody id="skills"></tbody>
  </table>
</div>

<div class="section">
  <h2>Damage Tracker</h2>
  <table>
    <tr>
      <td><label><input type="radio" name="damage" /> Healthy</label><br><small>(no penalty)</small></td>
      <td><label><input type="radio" name="damage" /> Minor Injury</label><br><small>(-1 penalty)</small></td>
      <td><label><input type="radio" name="damage" /> Moderate Injury</label><br><small>(-2 penalty)</small></td>
      <td><label><input type="radio" name="damage" /> Severe Injury</label><br><small>(-3 penalty)</small></td>
      <td><label><input type="radio" name="damage" /> Incapacitated</label><br><small>(KO/Unconscious)</small></td>
    </tr>
  </table>
</div>

<div class="section">
  <h2>Stress Tracker</h2>
  <table>
    <tr>
      <td><label><input type="radio" name="stress" /> Calm</label><br><small>(no penalty)</small></td>
      <td><label><input type="radio" name="stress" /> Anxious</label><br><small>(-1 penalty)</small></td>
      <td><label><input type="radio" name="stress" /> Stressed</label><br><small>(-2 penalty)</small></td>
      <td><label><input type="radio" name="stress" /> Panicked</label><br><small>(-3 penalty)</small></td>
      <td><label><input type="radio" name="stress" /> Mental Breakdown</label><br><small>(mental collapse)</small></td>
    </tr>
  </table>
</div>

<div class="section">
  <h2>Notes</h2>
  <textarea placeholder="Write character notes here..."></textarea>
</div>

<script>

window.onload = function () {
  const statList = ['Physicality', 'Agility', 'Senses', 'Understanding', 'Knowledge', 'Personality'];
  const stats = {};
  let availableStatPoints = 20;
  let availableSkillPoints = 5;
  let totalSkillLevelsGained = 0;

  statList.forEach(stat => stats[stat] = 0);

  const statTable = document.getElementById("stats");
  statList.forEach(stat => {
    const row = document.createElement("tr");
    const nameCell = document.createElement("td");
    nameCell.innerText = stat;
    const minusCell = document.createElement("td");
    const valueCell = document.createElement("td");
    const plusCell = document.createElement("td");

    const minus = document.createElement("button");
    minus.innerText = "‚àí";
    minus.onclick = () => {
      if (stats[stat] > 0) {
        stats[stat]--;
        availableStatPoints++;
        updateStat(stat);
        updateStatPointDisplay();
      }
    };
    minusCell.appendChild(minus);

    const val = document.createElement("span");
    val.id = stat;
    val.innerText = stats[stat];
    valueCell.appendChild(val);

    const plus = document.createElement("button");
    plus.innerText = "+";
    plus.onclick = () => {
      if (stats[stat] < 5 && availableStatPoints > 0) {
        stats[stat]++;
        availableStatPoints--;
        updateStat(stat);
        updateStatPointDisplay();
      }
    };
    plusCell.appendChild(plus);

    row.appendChild(nameCell);
    row.appendChild(minusCell);
    row.appendChild(valueCell);
    row.appendChild(plusCell);
    statTable.appendChild(row);
  });

  function updateStat(stat) {
    document.getElementById(stat).innerText = stats[stat];
  }

  function updateStatPointDisplay() {
    document.getElementById("availableStats").innerText = availableStatPoints;
  }

  function updateSkillPointDisplay() {
    document.getElementById("availableSkillPoints").innerText = availableSkillPoints;
  }

  const skillDiv = document.getElementById("skills");
  for (let i = 1; i <= 10; i++) {
    let level = 1;
    let xp = 0;
    const row = document.createElement("tr");

    const skillNameInput = document.createElement("input");
    skillNameInput.type = "text";
    skillNameInput.placeholder = "Skill Name";
    row.appendChild(document.createElement("td")).appendChild(skillNameInput);

    const levelDisplay = document.createElement("span");
    levelDisplay.innerText = level;
    row.appendChild(document.createElement("td")).appendChild(levelDisplay);

    const btnAddLevel = document.createElement("button");
    btnAddLevel.innerText = "+1";
    btnAddLevel.onclick = () => {
      if (availableSkillPoints > 0 && level < 5) {
        level++;
        availableSkillPoints--;
        levelDisplay.innerText = level;
        updateSkillPointDisplay();
      }
    };
    row.appendChild(document.createElement("td")).appendChild(btnAddLevel);

    const btnSubLevel = document.createElement("button");
    btnSubLevel.innerText = "‚àí1";
    btnSubLevel.onclick = () => {
      if (level > 1) {
        level--;
        availableSkillPoints++;
        levelDisplay.innerText = level;
        updateSkillPointDisplay();
      }
    };
    row.appendChild(document.createElement("td")).appendChild(btnSubLevel);

    const xpDisplay = document.createElement("span");
    xpDisplay.innerText = xp;
    row.appendChild(document.createElement("td")).appendChild(xpDisplay);

    const btnAddXP = document.createElement("button");
    btnAddXP.innerText = "+1 XP";
    btnAddXP.onclick = () => {
      xp++;
      xpDisplay.innerText = xp;
    };
    row.appendChild(document.createElement("td")).appendChild(btnAddXP);

    const btnLevelUp = document.createElement("button");
    btnLevelUp.innerText = "Level Up";
    btnLevelUp.onclick = () => {
      const requiredXP = level * 5;
      if (xp >= requiredXP && level < 5) {
        level++;
        xp = 0;
        levelDisplay.innerText = level;
        xpDisplay.innerText = xp;
        totalSkillLevelsGained++;
        if (totalSkillLevelsGained % 3 === 0) {
          availableStatPoints++;
          updateStatPointDisplay();
        }
      }
    };
    row.appendChild(document.createElement("td")).appendChild(btnLevelUp);

    skillDiv.appendChild(row);
  }

  updateStatPointDisplay();
  updateSkillPointDisplay();
};

</script>


<div class="section">
  <button onclick="saveCharacter()">üíæ Save Character</button>
  <button onclick="loadCharacter()">üìÇ Load Character</button>
  <button onclick="clearCharacter()">üóëÔ∏è Clear Save</button>
</div>
<script>
function saveCharacter() {
  const characterData = {
    characterName: document.querySelector('input[placeholder="Character Name"]').value,
    playerName: document.querySelector('input[placeholder="Player Name"]').value,
    stats: {},
    skills: [],
    damage: document.querySelector('input[name="damage"]:checked')?.value,
    stress: document.querySelector('input[name="stress"]:checked')?.value,
    notes: document.querySelector('textarea').value,
    availableStatPoints: availableStatPoints,
    availableSkillPoints: availableSkillPoints
  };
  statList.forEach(stat => { characterData.stats[stat] = stats[stat]; });
  const skillRows = document.querySelectorAll('#skills tr');
  skillRows.forEach(row => {
    const skill = {
      name: row.cells[0].querySelector('input').value,
      level: parseInt(row.cells[1].innerText),
      xp: parseInt(row.cells[4].innerText)
    };
    characterData.skills.push(skill);
  });
  localStorage.setItem('skillscapeCharacter', JSON.stringify(characterData));
  alert("Character saved!");
}

function loadCharacter() {
  const savedData = JSON.parse(localStorage.getItem('skillscapeCharacter'));
  if (!savedData) { alert("No saved character found!"); return; }
  document.querySelector('input[placeholder="Character Name"]').value = savedData.characterName;
  document.querySelector('input[placeholder="Player Name"]').value = savedData.playerName;
  document.querySelector('textarea').value = savedData.notes;
  availableStatPoints = savedData.availableStatPoints;
  availableSkillPoints = savedData.availableSkillPoints;
  updateStatPointDisplay();
  updateSkillPointDisplay();
  for (let stat in savedData.stats) {
    stats[stat] = savedData.stats[stat];
    document.getElementById(stat).innerText = stats[stat];
  }
  const skillRows = document.querySelectorAll('#skills tr');
  savedData.skills.forEach((skill, index) => {
    if(skillRows[index]) {
      skillRows[index].cells[0].querySelector('input').value = skill.name;
      skillRows[index].cells[1].innerText = skill.level;
      skillRows[index].cells[4].innerText = skill.xp;
    }
  });
  if(savedData.damage) document.querySelector(`input[name="damage"][value="${savedData.damage}"]`).checked = true;
  if(savedData.stress) document.querySelector(`input[name="stress"][value="${savedData.stress}"]`).checked = true;
  alert("Character loaded!");
}

function clearCharacter() {
  if (confirm("Clear saved character?")) {
    localStorage.removeItem('skillscapeCharacter');
    alert("Save cleared.");
  }
}
</script>
</body>
</html>
